# This patch enables debug logging to understand cache behavior
# Apply with: kubectl patch deployment llama-3-2-1b-decode -n llm-d --patch-file=this-file.yaml

spec:
  template:
    spec:
      containers:
      - name: vllm
        env:
        - name: VLLM_LOGGING_LEVEL
          value: DEBUG
        - name: VLLM_DEBUG_PREFIX_CACHE
          value: "1"
        args:
        - --port
        - "8001"
        - --enable-prefix-caching
        - --prefix-caching-hash-algo
        - sha256
        - --disable-log-requests  # Remove this to see request details
        - --kv-transfer-config
        - '{"kv_connector":"NixlConnector","kv_role":"kv_both"}'
