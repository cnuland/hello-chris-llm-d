apiVersion: gateway.networking.k8s.io/v1
kind: HTTPRoute
metadata:
  name: llama-3-2-1b-cache-concentrated-route
  namespace: llm-d
spec:
  parentRefs:
  - name: llm-d-gateway
    namespace: llm-d
  hostnames:
  - "llm-d-inference-gateway-llm-d.apps.rhoai-cluster.qhxt.p1.openshiftapps.com"
  rules:
  - matches:
    - path:
        type: PathPrefix
        value: "/v1"
    backendRefs:
    # Primary pod gets 80% of traffic (for cache concentration)
    - name: llama-3-2-1b-cache-aware-service
      port: 8000
      weight: 80
    # Secondary load balancing for remaining 20%
    - name: llama-3-2-1b-service-decode
      port: 8000
      weight: 20
