# Production HTTPRoute for Cache-Aware Routing
# Routes traffic to cache-aware service for optimal KV-cache performance
apiVersion: gateway.networking.k8s.io/v1
kind: HTTPRoute
metadata:
  name: llama-3-2-1b-http-route
  namespace: llm-d
spec:
  hostnames:
  - llm-d-inference-gateway-llm-d.apps.rhoai-cluster.qhxt.p1.openshiftapps.com
  parentRefs:
  - group: gateway.networking.k8s.io
    kind: Gateway
    name: llm-d-gateway
    namespace: llm-d
  rules:
  - backendRefs:
    - group: ""
      kind: Service
      name: llama-3-2-1b-cache-aware-service
      port: 8000
      weight: 1
    matches:
    - path:
        type: PathPrefix
        value: /v1
status:
  parents:
  - conditions:
    - lastTransitionTime: "2025-07-31T00:53:35Z"
      message: Route was valid
      observedGeneration: 8
      reason: Accepted
      status: "True"
      type: Accepted
    - lastTransitionTime: "2025-07-31T00:53:35Z"
      message: All references resolved
      observedGeneration: 8
      reason: ResolvedRefs
      status: "True"
      type: ResolvedRefs
    controllerName: istio.io/gateway-controller
    parentRef:
      group: gateway.networking.k8s.io
      kind: Gateway
      name: llm-d-gateway
      namespace: llm-d
